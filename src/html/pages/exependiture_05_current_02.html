<!DOCTYPE HTML>
<html lang="ko">
@@include('../include/head.html')
<body>
<!-- 04_지출관리_00_홈_07_현금흐름보기_03_잔고예상_200602 -->
<div id="wrap" class="wrap">

    <!--  S header  -->
    <div class="header">
        <a href="#" class="sprite btn_back"></a>
        <h2>현금 흐름 보기</h2>
        <a class="btn-edit" href="#">편집</a>
    </div>
    <!--  E header  -->

    <!--  S contents  -->
    <div id="contents" class="contents">

        <div class="box_ex_current">
            <div class="tab_area">
                <a class="btn-left" href="#">잔고 예상</a>
                <a class="btn-right active" href="#">수입/지출</a>
            </div>

            <div class="chartWrapper">
                <div class="chartScroll">

                    <div class="chartArea">
                        <canvas id="barChart" width="1400" height="213"></canvas>
                    </div>

                    <!-- S
                        ** x축 day label **
                        - 30일 기준
                        - 해당 날짜에 데이터를 가지고 있으면, li에 active 클래스 추가
                    -->
                    <div class="xaxis-day-label">
                        <ul class="clearfix">
                            <li>25</li>
                            <li>26</li>
                            <li class="active">27</li>
                            <li>28</li>
                            <li class="active">29</li>
                            <li class="active">30</li>
                            <li>31</li>
                            <li class="active">1</li>
                            <li>2</li>
                            <li>3</li>

                            <li>4</li>
                            <li>5</li>
                            <li>6</li>
                            <li>7</li>
                            <li>8</li>
                            <li>9</li>
                            <li>10</li>
                            <li>11</li>
                            <li>12</li>
                            <li>13</li>

                            <li>14</li>
                            <li>15</li>
                            <li>16</li>
                            <li>17</li>
                            <li>18</li>
                            <li>19</li>
                            <li>20</li>
                            <li>21</li>
                            <li>22</li>
                            <li>23</li>
                        </ul>
                    </div>
                    <!-- E X축 day label -->

                    <!-- S
                        ** x축 month label **
                        - 첫 해당날짜에 해당하는 '월'값 입력
                        - 1일인 데이터에 해당하는 '월'값 입력
                    -->
                    <div class="xaxis-month-label">
                        <ul class="clearfix">
                            <li>5월</li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li>6월</li>
                            <li></li>
                            <li></li>

                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>

                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                        </ul>
                    </div>
                    <!-- E X축 month label -->

                </div>
                <div class="yaxis-label bar"> <!-- barChart는 bar클래스 추가 -->
                    <ul>
                        <li></li>
                        <li>200</li>
                        <li>100</li>
                        <li>50</li>
                        <li>0</li>
                    </ul>
                    <span class="unit">(만)</span>
                </div>
            </div>

            <div class="ex-current">
                <p class="area-title">
                    <span class="title">현금 흐름 계산</span>
                    <span class="date">4월 20일 14시 36분 기준</span>
                </p>
                <ul class="ex01-list">
                    <li class="ex01-item">
                        <span class="title">산출 기간</span>
                        <span class="date">4월 20일 ~ 5월 21일</span>
                    </li>
                    <li class="ex01-item">
                        <span class="title">현재 잔고</span>
                        <span class="value">400,000</span>
                    </li>
                    <li class="ex01-item">
                        <span class="title">남은 지출</span>
                        <span class="value">4,600,000</span>
                    </li>
                    <li class="ex01-item">
                        <span class="title">예상 수입</span>
                        <span class="value">0</span>
                    </li>
                    <!--
                        날짜 : 2020.07.16
                        작성자 : 이주연
                        수정 내용 : 버튼 수정
                    -->
                    <li class="ex01-item">
                        <a class="btn btn-add" href="javascript:void(0)"><i class="sprite ico_btn_add_nor"></i>수입추가</a>
                    </li>
                </ul>
                <div class="ex02-list">
                    <p class="inner">
                        <span class="title">현금 흐름</span>
                        <span class="value">- 4,200,000</span>
                        <span class="date">5월 24일 잔고 부족</span>
                    </p>
                </div>
                <ul class="ex03-list">
                    <li class="ex03-item clearfix">
                        <span class="date">5월 27일</span>
                        <span class="title">현재 잔고</span>
                        <span class="value in">400,000</span> <!-- 입급일 경우, in 클래스 추가 -->
                    </li>
                    <li class="ex03-item clearfix">
                        <span class="date">5월 27일</span>
                        <span class="title">도시가스</span>
                        <span class="value">- 140,000</span>
                        <span class="balance">589,000</span>
                    </li>
                    <li class="ex03-item clearfix">
                        <span class="date">5월 29일</span>
                        <span class="title">메리츠 더편한라이프보험</span>
                        <span class="value">- 45,000</span>
                        <span class="balance">589,000</span>
                    </li>
                    <li class="ex03-item clearfix">
                        <span class="date">6월 1일</span>
                        <span class="title">삼성화재 어린이 보험</span>
                        <span class="value">- 100,000</span>
                        <span class="balance">589,000</span>
                    </li>
                    <li class="ex03-item clearfix">
                        <span class="date">6월 3일</span>
                        <span class="title">아파트 관리비</span>
                        <span class="value">- 45,000</span>
                        <span class="balance">589,000</span>
                    </li>
                    <li class="ex03-item clearfix">
                        <span class="date">6월 5일</span>
                        <span class="title">클레버 영어 학원 (예원)</span>
                        <span class="value">- 405,000</span>
                        <span class="balance">589,000</span>
                    </li>
                    <li class="ex03-item clearfix">
                        <span class="date">6월 10일</span>
                        <span class="title">월급</span>
                        <span class="value in">1,700,000</span> <!-- 입급일 경우, in 클래스 추가 -->
                        <span class="balance">589,000</span>
                    </li>
                    <li class="ex03-item clearfix">
                        <span class="date">6월 15일</span>
                        <span class="title">SKT 010-****-140*</span>
                        <span class="value">- 45,000</span>
                        <span class="balance">589,000</span>
                    </li>
                </ul>
                <div class="btn_area">
                    <a class="btn btn-lg btn-block btn-big" href="javascript:void(0)"><i
                            class="sprite ico_btn_simul"></i>다시 계산하기</a>
                </div>
            </div>
        </div>
    </div>
    <!--  E contents  -->
    <script>
        window.chartColors = {
            red: '#ef4b61',
            purple: '#6839d3',
            grey: '#afaeb8'
        }; // color set

        var ctx = document.getElementById("barChart").getContext("2d");

        var barChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: [
                    null, null, null, null, null, null, null, null, null, null,
                    null, null, null, null, null, null, null, null, null, null,
                    null, null, null, null, null, null, null, null, null, null,
                ], // 30일 동안에 해당하는 데이터 - xaxis-day-label, xaxis-month-label에서 처리
                /*
                   - datasets[0],datasets[1],datasets[2]
                   - 해당 날짜에 두 데이터가 없을 경우, datasets[0],datasets[1],datasets[2]에 null 추가
                    ex) datasets : [{
                                        data: [null]
                                    },
                                    {
                                        data: [null]
                                    },
                                    {
                                        data: [null]
                                    }]

                   - 지출만 있는 경우  -> datasets[1]에 데이터 추가
                                      -> datasets[0],datasets[2]에는 null 추가
                   ex) datasets : [{
                                        data: [null]
                                    },
                                    {
                                        data: [200]
                                    },
                                    {
                                        data: [null]
                                    }]

                   - 수입이 있을 경우,
                            수입 data -> datasets[0]
                            지출 data -> datasets[2]에 데이터 추가
                                      -> datasets[1]에는 null 추가
                     ex) datasets : [{
                                        data: [150]
                                    },
                                    {
                                        data: [null]
                                    },
                                    {
                                        data: [200]
                                    }]
                * */
                datasets: [
                    {
                        backgroundColor: "#6839d3",
                        data: [null, null, 170, null, null, null, null, 120, null, null, null, null, 170, null, null, null, null, 100, null, null, null, null, 120, null, null, null, null, 100, null, null]
                    },
                    {
                        backgroundColor: "#dfe3ea",
                        data: [null, null, null, null, 78, 43, 85,null,55,100,null, null, null, null, 88, 55, 23,null,55,100,null, null, null, null, 10, 89, 5,null,120,111]
                    },
                    {
                        backgroundColor: "#dfe3ea",
                        data: [null, null, 130, null, null, null, null, 100, null, null, null, null, 130, null, null, null, null, 100, null, null, null, null, 130, null, null, null, null, 100, null, null]
                    }
                ]
            },

            options: {
                responsive: true,
                showTooltips: false,
                tooltips: {enabled: false},
                hover: {mode: null},
                layout: {
                    padding: {
                        left: 15,
                    }
                },
                title: {
                    display: false,
                },
                legend: {
                    display: false
                },
                scales: {
                    xAxes: [
                        {
                            id: 'xAxis1',
                            type: "category",
                            ticks: {
                                display: false,
                            },
                            gridLines: {
                                display: false
                            },
                            barPercentage: 0.7,
                        },
                        {
                            id: 'xAxis2',
                            type: "category",
                            ticks: {
                                display: false
                            },
                            gridLines: {
                                display: false
                            },
                        }],
                    yAxes: [{
                        display: true,
                        scaleLabel: {
                            display: true,
                        },
                        gridLines: {
                            color: '#f5f6f8',
                            drawBorder: false,
                            zeroLineColor: '#f5f6f8'
                        },
                        ticks: {
                            display:false,
                            beginAtZero: false,
                            min: 0, // y축 최소값
                            max: 200, // y축 최대값
                            stepSize: 50, // 최소값에서 증가율
                            offsetGridLines: true,
                        },
                    }],
                },
                plugins: {
                    datalabels: {
                        align: 'end',
                        color: function (context) {
                            var index = context.dataIndex;
                            var value = context.dataset.data[index];
                            var color = 'red';
                            console.log(context)
                            if (context.datasetIndex === 0) {
                                color = window.chartColors.purple;
                            } else {
                                color = window.chartColors.grey;
                            }
                            return color;
                        },
                        anchor: 'end',
                        backgroundColor: null,
                        borderColor: null,
                        borderWidth: 1,
                        font: {
                            size: 11,
                            family: 'var(--font4)',
                            lineHeight: '20px',
                            letterSpacing: '-.11px'
                        },
                        padding: 0,
                    }
                },
            }
        });
    </script>
</div>
</body>
</html>
